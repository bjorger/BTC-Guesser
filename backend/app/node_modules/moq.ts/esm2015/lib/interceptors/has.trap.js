import { InOperatorInteraction } from "../interactions";
/**
 * @hidden
 */
export class HasTrap {
    constructor(tracker, propertiesValueStorage, interactionPlayer, inOperatorInteractionExplorer, hasPropertyExplorer, hasMethodExplorer, presetPlayablesUpdater) {
        this.tracker = tracker;
        this.propertiesValueStorage = propertiesValueStorage;
        this.interactionPlayer = interactionPlayer;
        this.inOperatorInteractionExplorer = inOperatorInteractionExplorer;
        this.hasPropertyExplorer = hasPropertyExplorer;
        this.hasMethodExplorer = hasMethodExplorer;
        this.presetPlayablesUpdater = presetPlayablesUpdater;
    }
    intercept(property) {
        const interaction = new InOperatorInteraction(property);
        this.tracker.add(interaction);
        if (this.propertiesValueStorage.has(property)) {
            return true;
        }
        if (this.inOperatorInteractionExplorer.has(property)) {
            return this.interactionPlayer.play(interaction);
        }
        this.presetPlayablesUpdater.update(interaction, undefined);
        if (this.hasPropertyExplorer.has(property)) {
            return true;
        }
        if (this.hasMethodExplorer.has(property)) {
            return true;
        }
        return false;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGFzLnRyYXAuanMiLCJzb3VyY2VSb290IjoiLi4vLi4vLi4vLi4vcHJvamVjdHMvbW9xL3NyYy8iLCJzb3VyY2VzIjpbImxpYi9pbnRlcmNlcHRvcnMvaGFzLnRyYXAudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUFFLHFCQUFxQixFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFReEQ7O0dBRUc7QUFDSCxNQUFNLE9BQU8sT0FBTztJQUNoQixZQUNZLE9BQWdCLEVBQ2hCLHNCQUE4QyxFQUM5QyxpQkFBb0MsRUFDcEMsNkJBQTRELEVBQzVELG1CQUF3QyxFQUN4QyxpQkFBb0MsRUFDcEMsc0JBQThDO1FBTjlDLFlBQU8sR0FBUCxPQUFPLENBQVM7UUFDaEIsMkJBQXNCLEdBQXRCLHNCQUFzQixDQUF3QjtRQUM5QyxzQkFBaUIsR0FBakIsaUJBQWlCLENBQW1CO1FBQ3BDLGtDQUE2QixHQUE3Qiw2QkFBNkIsQ0FBK0I7UUFDNUQsd0JBQW1CLEdBQW5CLG1CQUFtQixDQUFxQjtRQUN4QyxzQkFBaUIsR0FBakIsaUJBQWlCLENBQW1CO1FBQ3BDLDJCQUFzQixHQUF0QixzQkFBc0IsQ0FBd0I7SUFFMUQsQ0FBQztJQUVNLFNBQVMsQ0FBQyxRQUFxQjtRQUNsQyxNQUFNLFdBQVcsR0FBRyxJQUFJLHFCQUFxQixDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ3hELElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBRTlCLElBQUksSUFBSSxDQUFDLHNCQUFzQixDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUMzQyxPQUFPLElBQUksQ0FBQztTQUNmO1FBRUQsSUFBSSxJQUFJLENBQUMsNkJBQTZCLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxFQUFFO1lBQ2xELE9BQU8sSUFBSSxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztTQUNuRDtRQUVELElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxNQUFNLENBQUMsV0FBVyxFQUFFLFNBQVMsQ0FBQyxDQUFDO1FBRTNELElBQUksSUFBSSxDQUFDLG1CQUFtQixDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUN4QyxPQUFPLElBQUksQ0FBQztTQUNmO1FBRUQsSUFBSSxJQUFJLENBQUMsaUJBQWlCLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxFQUFFO1lBQ3RDLE9BQU8sSUFBSSxDQUFDO1NBQ2Y7UUFFRCxPQUFPLEtBQUssQ0FBQztJQUNqQixDQUFDO0NBQ0oiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUcmFja2VyIH0gZnJvbSBcIi4uL3RyYWNrZXIvdHJhY2tlclwiO1xuaW1wb3J0IHsgSW5PcGVyYXRvckludGVyYWN0aW9uIH0gZnJvbSBcIi4uL2ludGVyYWN0aW9uc1wiO1xuaW1wb3J0IHsgUHJvcGVydGllc1ZhbHVlU3RvcmFnZSB9IGZyb20gXCIuL3Byb3BlcnRpZXMtdmFsdWUuc3RvcmFnZVwiO1xuaW1wb3J0IHsgSW50ZXJhY3Rpb25QbGF5ZXIgfSBmcm9tIFwiLi4vaW50ZXJhY3Rpb24tcGxheWVycy9pbnRlcmFjdGlvbi5wbGF5ZXJcIjtcbmltcG9ydCB7IEhhc1Byb3BlcnR5RXhwbG9yZXIgfSBmcm9tIFwiLi4vZXhwbG9yZXJzL2hhcy1wcm9wZXJ0eS5leHBsb3Jlci9oYXMtcHJvcGVydHkuZXhwbG9yZXJcIjtcbmltcG9ydCB7IEhhc01ldGhvZEV4cGxvcmVyIH0gZnJvbSBcIi4uL2V4cGxvcmVycy9oYXMtbWV0aG9kLmV4cGxvcmVyL2hhcy1tZXRob2QuZXhwbG9yZXJcIjtcbmltcG9ydCB7IEluT3BlcmF0b3JJbnRlcmFjdGlvbkV4cGxvcmVyIH0gZnJvbSBcIi4uL2V4cGxvcmVycy9pbi1vcGVyYXRvci1pbnRlcmFjdGlvbi5leHBsb3Jlci9pbi1vcGVyYXRvci1pbnRlcmFjdGlvbi5leHBsb3JlclwiO1xuaW1wb3J0IHsgUHJlc2V0UGxheWFibGVzVXBkYXRlciB9IGZyb20gXCIuLi9wbGF5YWJsZXMvcHJlc2V0LXBsYXlhYmxlcy51cGRhdGVyXCI7XG5cbi8qKlxuICogQGhpZGRlblxuICovXG5leHBvcnQgY2xhc3MgSGFzVHJhcCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgdHJhY2tlcjogVHJhY2tlcixcbiAgICAgICAgcHJpdmF0ZSBwcm9wZXJ0aWVzVmFsdWVTdG9yYWdlOiBQcm9wZXJ0aWVzVmFsdWVTdG9yYWdlLFxuICAgICAgICBwcml2YXRlIGludGVyYWN0aW9uUGxheWVyOiBJbnRlcmFjdGlvblBsYXllcixcbiAgICAgICAgcHJpdmF0ZSBpbk9wZXJhdG9ySW50ZXJhY3Rpb25FeHBsb3JlcjogSW5PcGVyYXRvckludGVyYWN0aW9uRXhwbG9yZXIsXG4gICAgICAgIHByaXZhdGUgaGFzUHJvcGVydHlFeHBsb3JlcjogSGFzUHJvcGVydHlFeHBsb3JlcixcbiAgICAgICAgcHJpdmF0ZSBoYXNNZXRob2RFeHBsb3JlcjogSGFzTWV0aG9kRXhwbG9yZXIsXG4gICAgICAgIHByaXZhdGUgcHJlc2V0UGxheWFibGVzVXBkYXRlcjogUHJlc2V0UGxheWFibGVzVXBkYXRlcikge1xuXG4gICAgfVxuXG4gICAgcHVibGljIGludGVyY2VwdChwcm9wZXJ0eTogUHJvcGVydHlLZXkpOiBhbnkge1xuICAgICAgICBjb25zdCBpbnRlcmFjdGlvbiA9IG5ldyBJbk9wZXJhdG9ySW50ZXJhY3Rpb24ocHJvcGVydHkpO1xuICAgICAgICB0aGlzLnRyYWNrZXIuYWRkKGludGVyYWN0aW9uKTtcblxuICAgICAgICBpZiAodGhpcy5wcm9wZXJ0aWVzVmFsdWVTdG9yYWdlLmhhcyhwcm9wZXJ0eSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuaW5PcGVyYXRvckludGVyYWN0aW9uRXhwbG9yZXIuaGFzKHByb3BlcnR5KSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW50ZXJhY3Rpb25QbGF5ZXIucGxheShpbnRlcmFjdGlvbik7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnByZXNldFBsYXlhYmxlc1VwZGF0ZXIudXBkYXRlKGludGVyYWN0aW9uLCB1bmRlZmluZWQpO1xuXG4gICAgICAgIGlmICh0aGlzLmhhc1Byb3BlcnR5RXhwbG9yZXIuaGFzKHByb3BlcnR5KSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5oYXNNZXRob2RFeHBsb3Jlci5oYXMocHJvcGVydHkpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG4iXX0=