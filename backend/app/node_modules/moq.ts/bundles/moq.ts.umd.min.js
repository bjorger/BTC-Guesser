!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define("moq.ts",["exports"],e):e(((t="undefined"!=typeof globalThis?globalThis:t||self).moq=t.moq||{},t.moq.ts={}))}(this,(function(t){"use strict";var e=Symbol("MoqAPI"),r=function(){function t(t){this.predicate=t}return t.Is=function(e){return new t(e)},t.IsAny=function(){return new t((function(){return!0}))},t.prototype.test=function(t){try{var e=this.predicate(t);return!0===e||void 0===e}catch(t){return!1}},t}(),n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};function o(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}Object.create;function i(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function s(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s}function a(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(s(arguments[e]));return t}Object.create;var u,c=function(t,e){this.name=t,this.args=e},p=function(t){function e(e,r){return t.call(this,e,r)||this}return o(e,t),e}(c),f=function(t){function e(e){return t.call(this,void 0,e)||this}return o(e,t),e}(c),h=function(t){function e(e){return t.call(this,e,void 0)||this}return o(e,t),e}(c),l=function(t){function e(e,r){var n=t.call(this,e,[r])||this;return n.value=r,n}return o(e,t),e}(c),d=function(t){function e(e){return t.call(this,e,void 0)||this}return o(e,t),e}(c),y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(p),v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(f),m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(h),g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(l),x=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(d),b=function(){function t(){}return t.prototype.reflect=function(t){this.reflectedInfo=void 0;var e=t(this.expressionProxy());return e instanceof r&&this.reflectedInfo instanceof g==!1?e:this.reflectedInfo},t.prototype.expressionProxy=function(){var t=this;return new Proxy((function(){}),{get:function(e,r){return t.reflectedInfo=new m(r),function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.reflectedInfo=new y(r,e)}},set:function(e,r,n){return t.reflectedInfo=new g(r,n),!0},apply:function(e,r,n){t.reflectedInfo=new v(n)},has:function(e,r){return t.reflectedInfo=new x(r),!0}})},t}(),w=function(){function t(t,e,r,n,o,i,s){this.options=t,this.getTrap=e,this.setTrap=r,this.hasTrap=n,this.applyTrap=o,this.getPrototypeOfTrap=i,this.setPrototypeOfTrap=s}return t.prototype.object=function(){return void 0===this._proxy&&(this._proxy=this.createObject()),this._proxy},t.prototype.createObject=function(){var t=this,e={get:function(e,r){return t.getTrap.intercept(r)},set:function(e,r,n){return t.setTrap.intercept(e,r,n)},has:function(e,r){return t.hasTrap.intercept(r)},apply:function(e,r,n){return t.applyTrap.intercept(e,r,n)},getPrototypeOf:function(){return t.getPrototypeOfTrap.intercept()},setPrototypeOf:function(e,r){return t.setPrototypeOfTrap.intercept(r)}};return this.options.name&&(e.mockName=this.options.name),new Proxy(this.options.target,e)},t}();(u=t.Range||(t.Range={}))[u.Exclusive=0]="Exclusive",u[u.Inclusive=1]="Inclusive";var P=function(){function e(t,e){this.evaluator=t,this.message=e}return e.AtLeast=function(t){return new e((function(e){return e>=t}),"Should be called at least "+t+" time(s)")},e.AtLeastOnce=function(){return e._atLeastOnce},e.AtMost=function(t){return new e((function(e){return e<=t}),"Should be called at most "+t+" time(s)")},e.AtMostOnce=function(){return e._atMostOnce},e.Between=function(r,n,o){return o===t.Range.Exclusive?new e((function(t){return t>r&&t<n}),"Should be called exclusively between "+r+" and "+n):new e((function(t){return t>=r&&t<=n}),"Should be called inclusively between "+r+" and "+n)},e.Exactly=function(t){return new e((function(e){return e===t}),"Should be called exactly "+t+" time(s)")},e.Never=function(){return e._never},e.Once=function(){return e._once},e.prototype.test=function(t){return this.evaluator(t)},e}();P._once=new P((function(t){return 1===t}),"Should be called once"),P._never=new P((function(t){return 0===t}),"Should be called never"),P._atMostOnce=new P((function(t){return t<=1}),"Should be called at most once"),P._atLeastOnce=new P((function(t){return t>=1}),"Should be called at least once");var C=function(){function t(t){this.sequenceId=t,this.log=[]}return t.prototype.add=function(t){var e={id:this.sequenceId.next(),expression:t};this.log.push(e)},t.prototype.get=function(){return a(this.log)},t}(),E=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e}(Error),O=function(){function t(t,e,r){this.reflector=t,this.callCounter=e,this.verifyFormatter=r}return t.prototype.test=function(t,e,r,n){var o=this.reflector.reflect(t),i=this.callCounter.count(o,r);if(!1===e.test(i)){var s=this.verifyFormatter.format(o,e.message,i,r,n);throw new E(s)}},t}(),M=function(){function t(t){var e;this.prototype=null,this.prototype=null!==(e=null==t?void 0:t.prototype)&&void 0!==e?e:t}return t.prototype.get=function(){return this.prototype},t.prototype.set=function(t){this.prototype=t},t}();
/**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
function j(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(j).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;var e=t.toString();if(null==e)return""+e;var r=e.indexOf("\n");return-1===r?e:e.substring(0,r)}
/**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */function F(t){for(var e in t)if(t[e]===F)return e;throw Error("Could not find renamed property on target object.")}var S=F({__forward_ref__:F});function I(t){return t.__forward_ref__=I,t.toString=function(){return j(this())},t}function _(t){return k(t)?t():t}function k(t){return"function"==typeof t&&t.hasOwnProperty(S)&&t.__forward_ref__===I}
/**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */var T,N=function(){function t(t){this.desc=t}return t.prototype.toString=function(){return"InjectionToken "+this.desc},t}(),A=new N("INJECTOR"),R={},D=/\n/gm,q="__source",H=F({provide:String,useValue:F}),L=function(){function t(){}return t.prototype.get=function(t,e){if(void 0===e&&(e=R),e===R){var r=new Error("NullInjectorError: No provider for "+j(t)+"!");throw r.name="NullInjectorError",r}return e},t}();function V(t,e,r,n){void 0===n&&(n=null),t=t&&"\n"===t.charAt(0)&&"Éµ"===t.charAt(1)?t.substr(2):t;var o=j(e);if(Array.isArray(e))o=e.map(j).join(" -> ");else if("object"==typeof e){var i=[];for(var s in e)if(e.hasOwnProperty(s)){var a=e[s];i.push(s+":"+("string"==typeof a?JSON.stringify(a):j(a)))}o="{"+i.join(", ")+"}"}return r+(n?"("+n+")":"")+"["+o+"]: "+t.replace(D,"\n  ")}(T=t.InjectFlags||(t.InjectFlags={}))[T.Default=0]="Default",T[T.Host=1]="Host",T[T.Self=2]="Self",T[T.SkipSelf=4]="SkipSelf",T[T.Optional=8]="Optional";
/**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var U=function(){},K=function(){},J=function(){},B=function(){},G=function(t,e,r){return new Z(t,e,r)},z=function(){function t(){}return t.create=function(t,e){return Array.isArray(t)?G(t,e,""):G(t.providers,t.parent,t.name||"")},t}();z.THROW_IF_NOT_FOUND=R,z.NULL=new L,z.__NG_ELEMENT_ID__=-1;var W=function(t){return t},Y=[],Q=W,X=function(){return Array.prototype.slice.call(arguments)},Z=function(){function e(t,e,r){void 0===e&&(e=new L),void 0===r&&(r=null),this.parent=e,this.source=r;var n=this._records=new Map;n.set(z,{token:z,fn:W,deps:Y,value:this,useNew:!1}),n.set(A,{token:A,fn:W,deps:Y,value:this,useNew:!1}),this.scope=et(n,t)}return e.prototype.get=function(e,r,n){void 0===n&&(n=t.InjectFlags.Default);var o=this._records,i=o.get(e);void 0===i&&o.set(e,null);try{return rt(e,i,o,this.parent,r,n)}catch(t){return function(t,e,r,n){var o=t.ngTempTokenPath;throw e[q]&&o.unshift(e[q]),t.message=V("\n"+t.message,o,r,n),t.ngTokenPath=o,t.ngTempTokenPath=null,t}(t,e,"StaticInjectorError",this.source)}},e.prototype.toString=function(){var t=[];return this._records.forEach((function(e,r){return t.push(j(r))})),"StaticInjector["+t.join(", ")+"]"},e}();function $(t){var e=function(t){var e=Y,r=t.deps;if(r&&r.length){e=[];for(var n=0;n<r.length;n++){var o=6,i=_(r[n]);if(Array.isArray(i))for(var s=0,a=i;s<a.length;s++){var u=a[s];u instanceof U||u===U?o|=1:u instanceof J||u===J?o&=-3:u instanceof K||u===K?o&=-5:i=_(u)}e.push({token:i,options:o})}}else if(t.useExisting){e=[{token:i=_(t.useExisting),options:6}]}else if(!r&&!(H in t))throw nt("'deps' required",t);return e}(t),r=W,n=Y,o=!1,i=_(t.provide);if(H in t)n=t.useValue;else if(t.useFactory)r=t.useFactory;else if(t.useExisting);else if(t.useClass)o=!0,r=_(t.useClass);else{if("function"!=typeof i)throw nt("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",t);o=!0,r=i}return{deps:e,fn:r,useNew:o,value:n}}function tt(t){return nt("Cannot mix multi providers and regular providers",t)}function et(t,e){var r=null;if(e)if(e=_(e),Array.isArray(e))for(var n=0;n<e.length;n++)r=et(t,e[n])||r;else{if("function"==typeof e)throw nt("Function/Class not supported",e);if(!e||"object"!=typeof e||!e.provide)throw nt("Unexpected provider",e);var o=_(e.provide),i=$(e);if(!0===e.multi){var s=t.get(o);if(s){if(s.fn!==X)throw tt(o)}else t.set(o,s={token:e.provide,deps:[],useNew:!1,fn:X,value:Y});o=e,s.deps.push({token:o,options:6})}var a=t.get(o);if(a&&a.fn===X)throw tt(o);t.set(o,i)}return r}function rt(e,r,n,o,i,s){try{return function(e,r,n,o,i,s){var u;if(!r||s&t.InjectFlags.SkipSelf)u=s&t.InjectFlags.Self?s&t.InjectFlags.Optional?z.NULL.get(e,void 0!==i?i:null):z.NULL.get(e,i):o.get(e,i,t.InjectFlags.Default);else{if((u=r.value)===Q)throw Error("ÉµCircular dependency");if(u===Y){r.value=Q;var c=r.useNew,p=r.fn,f=r.deps,h=Y;if(f.length){h=[];for(var l=0;l<f.length;l++){var d=f[l],y=d.options,v=2&y?n.get(d.token):void 0;h.push(rt(d.token,v,n,v||4&y?o:z.NULL,1&y?null:z.THROW_IF_NOT_FOUND,t.InjectFlags.Default))}}r.value=u=c?new(p.bind.apply(p,a([void 0],h))):p.apply(void 0,h)}}return u}(e,r,n,o,i,s)}catch(t){throw t instanceof Error||(t=new Error(t)),(t.ngTempTokenPath=t.ngTempTokenPath||[]).unshift(e),r&&r.value===Q&&(r.value=Y),t}}function nt(t,e){return new Error(V(t,e,"StaticInjectorError"))}function ot(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=t.injectorConfig;if(n)return z.create({providers:n.get(t,e)});throw new Error("injectorConfig is not defined")}var it=new N("IMock"),st=new N("mock options"),at=new N("PRESET_BUILDER_FACTORY"),ut=function(){function t(){this.value=0}return t.prototype.next=function(){return this.value++},t}(),ct=[{provide:ut,useClass:ut,deps:[]},{provide:C,useClass:C,deps:[ut]}],pt=[{provide:b,useClass:b,deps:[]}],ft=function(t,e,r){this.playable=t,this.target=e,this.origin=r},ht=function(t,e,r){this.playable=t,this.target=e,this.value=r},lt=function(t,e,r){this.playable=t,this.target=e,this.exception=r},dt=function(t,e,r){this.playable=t,this.target=e,this.callback=r},yt=function(t){var e=this;this.count=t,this.invoked=0,this.update=function(t){0===t&&e.invoked++},this.isPlayable=function(){return e.invoked<=e.count}},vt=function(){this.update=function(){},this.isPlayable=function(){return!1}},mt=function(){var t=this;this.played=!1,this.update=function(e){0===e&&(t.played=!0)},this.isPlayable=function(){return!1===t.played}},gt=function(){this.isPlayable=function(){return!0},this.update=function(){}},xt=function(t){var e=this;this.sequence=t,this.index=0,this.update=function(){e.index++},this.isPlayable=function(){return!(e.index>=e.sequence.length)&&e.sequence[e.index]}},bt=function(){function t(){}return t.Exactly=function(t){return new yt(t)},t.Always=function(){return t.always},t.Never=function(){return t.never},t.Once=function(){return new mt},t.Sequence=function(t){return new xt(t)},t}();bt.always=new gt,bt.never=new vt;var wt=function(){function t(t,e,r,n){void 0===n&&(n=bt.Always()),this.mock=t,this.set=e,this.target=r,this.playable=n}return t.prototype.mimics=function(t){var e=new ft(this.playable,this.target,t);return this.set(e),this.mock},t.prototype.returns=function(t){var e=new ht(this.playable,this.target,t);return this.set(e),this.mock},t.prototype.throws=function(t){var e=new lt(this.playable,this.target,t);return this.set(e),this.mock},t.prototype.callback=function(t){var e=new dt(this.playable,this.target,t);return this.set(e),this.mock},t.prototype.play=function(t){return this.playable=t,this},t}(),Pt=function(){function t(){this.presets=[]}return t.prototype.add=function(t){this.presets.unshift(t)},t.prototype.get=function(){return a(this.presets)},t}(),Ct=[{provide:Pt,useClass:Pt,deps:[]},{provide:at,useFactory:function(t,e){return function(r){return new wt(t,(function(t){return e.add(t)}),r)}},deps:[it,Pt]}],Et=function(){function t(t){this.expressionMatcher=t}return t.prototype.count=function(t,e){var r,n,o=0;try{for(var s=i(e),a=s.next();!a.done;a=s.next()){var u=a.value;!0===this.expressionMatcher.matched(u,t)&&(o+=1)}}catch(t){r={error:t}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return o},t}(),Ot=function(){function t(t,e){this.expectedExpressionFormatter=t,this.trackedExpressionsFormatter=e}return t.prototype.format=function(t,e,r,n,o){var i="-------------------------------------";return this.expectedExpressionFormatter.format(t,e,r,o)+"\n"+i+"\nTracked calls:\n"+this.trackedExpressionsFormatter.format(n)+"\n"+i+"\n"},t}(),Mt=function(){function t(t,e,r,n,o){this.getPropertyExpressionMatcher=t,this.setPropertyExpressionMatcher=e,this.methodExpressionMatcher=r,this.namedMethodExpressionMatcher=n,this.inOperatorExpressionMatcher=o}return t.prototype.matched=function(t,e){return t===e||(void 0===e||(t instanceof h&&(e instanceof m||e instanceof r)?this.getPropertyExpressionMatcher.matched(t,e):t instanceof l&&(e instanceof g||e instanceof r)?this.setPropertyExpressionMatcher.matched(t,e):t instanceof d&&(e instanceof x||e instanceof r)?this.inOperatorExpressionMatcher.matched(t,e):t instanceof f&&(e instanceof v||e instanceof r)?this.methodExpressionMatcher.matched(t,e):t instanceof p&&(e instanceof y||e instanceof r)&&this.namedMethodExpressionMatcher.matched(t,e)))},t}(),jt=[{provide:O,useClass:O,deps:[b,Et,Ot]},{provide:Et,useClass:Et,deps:[Mt]}],Ft=function(){function t(t,e){this.tracker=t,this.interactionPlayer=e}return t.prototype.intercept=function(t,e,r){var n=new f(r);return this.tracker.add(n),this.interactionPlayer.play(n)},t}(),St=function(){function t(t,e,r){this.playablePresetProvider=t,this.presetPlayablesUpdater=e,this.presetPlayer=r}return t.prototype.play=function(t){var e=this.playablePresetProvider.get(t);if(this.presetPlayablesUpdater.update(t,e),void 0!==e)return this.presetPlayer.play(e,t)},t}(),It=function(){function t(t,e,r,n,o,i,s){this.mock=t,this.tracker=e,this.propertiesValueStorage=r,this.interactionPlayer=n,this.hasPropertyExplorer=o,this.hasMethodExplorer=i,this.spyFunctionProvider=s}return t.prototype.intercept=function(t){var r=new h(t);return this.tracker.add(r),t===e?this.mock:this.propertiesValueStorage.has(t)?this.propertiesValueStorage.get(t):this.hasPropertyExplorer.has(t)?this.interactionPlayer.play(r):this.hasMethodExplorer.has(t)?this.spyFunctionProvider.get(t):this.interactionPlayer.play(r)},t}(),_t=function(){function t(){this.storage=new Map}return t.prototype.has=function(t){return this.storage.has(t)},t.prototype.get=function(t){return this.storage.get(t)},t.prototype.set=function(t,e){this.storage.set(t,e)},t}(),kt=function(){function t(t,e,r){this.presets=t,this.membersExplorer=e,this.explorer=r}return t.prototype.has=function(t){var e=this;return!!this.membersExplorer.hasProperty(t)||void 0!==this.presets.get().find((function(r){return e.explorer.has(t,r)}))},t}(),Tt=function(){function t(t,e,r){this.presets=t,this.membersExplorer=e,this.explorer=r}return t.prototype.has=function(t){var e=this;return!!this.membersExplorer.hasMethod(t)||void 0!==this.presets.get().find((function(r){return e.explorer.has(t,r)}))},t}(),Nt=function(){function t(t,e){this.tracker=t,this.interactionPlayer=e,this.map=new Map}return t.prototype.get=function(t){var e=this;return!1===this.map.has(t)&&this.map.set(t,(function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var o=new p(t,r);return e.tracker.add(o),e.interactionPlayer.play(o)})),this.map.get(t)},t}(),At=function(){function t(t){this.prototypeStorage=t}return t.prototype.intercept=function(){return this.prototypeStorage.get()},t}(),Rt=function(){function t(t,e,r,n,o,i,s){this.tracker=t,this.propertiesValueStorage=e,this.interactionPlayer=r,this.inOperatorInteractionExplorer=n,this.hasPropertyExplorer=o,this.hasMethodExplorer=i,this.presetPlayablesUpdater=s}return t.prototype.intercept=function(t){var e=new d(t);return this.tracker.add(e),!!this.propertiesValueStorage.has(t)||(this.inOperatorInteractionExplorer.has(t)?this.interactionPlayer.play(e):(this.presetPlayablesUpdater.update(e,void 0),!!this.hasPropertyExplorer.has(t)||!!this.hasMethodExplorer.has(t)))},t}(),Dt=function(){function t(t,e){this.presets=t,this.explorer=e}return t.prototype.has=function(t){var e=this;return void 0!==this.presets.get().find((function(r){return e.explorer.has(t,r)}))},t}(),qt=function(){function t(t,e){this.presets=t,this.matcher=e}return t.prototype.update=function(t,e){var r,n;try{for(var o=i(this.presets.get()),s=o.next();!s.done;s=o.next()){var a=s.value,u=a.target,c=a.playable.update;if(this.matcher.matched(t,u))c(a===e?0:1)}}catch(t){r={error:t}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}},t}(),Ht=function(){function t(t,e,r,n){this.tracker=t,this.propertiesValueStorage=e,this.interactionPlayer=r,this.propertyIsReadOnlyTester=n}return t.prototype.intercept=function(t,r,n){var o=new l(r,n);if(this.tracker.add(o),r===e)return!1;if(!0===this.propertyIsReadOnlyTester.isReadOnly(r))return!1;var i=this.interactionPlayer.play(o);return!0!==i&&void 0!==i||this.propertiesValueStorage.set(r,n),void 0===i||i},t}(),Lt=function(){function t(t){this.prototypeStorage=t}return t.prototype.intercept=function(t){return void 0!==t&&(this.prototypeStorage.set(t),!0)},t}(),Vt=function(){function t(t,e,r){this.storage=t,this.propertyDescriptorProvider=e,this.has=r}return t.prototype.isReadOnly=function(t){var e=this.storage.get();if(e&&this.has(e,t)){var r=this.propertyDescriptorProvider.get(e,t);return r.get instanceof Function&&void 0===r.set||!1===r.writable}return!1},t}(),Ut=[{provide:w,useClass:w,deps:[st,It,Ht,Rt,Ft,At,Lt]},{provide:Ft,useClass:Ft,deps:[C,St]},{provide:It,useClass:It,deps:[it,C,_t,St,kt,Tt,Nt]},{provide:At,useClass:At,deps:[M]},{provide:Rt,useClass:Rt,deps:[C,_t,St,Dt,kt,Tt,qt]},{provide:_t,useClass:_t,deps:[]},{provide:M,useFactory:function(t){var e=t.target;return new M(e)},deps:[st]},{provide:Ht,useClass:Ht,deps:[C,_t,St,Vt]},{provide:Lt,useClass:Lt,deps:[M]},{provide:Nt,useClass:Nt,deps:[C,St]}],Kt=[{provide:qt,useClass:qt,deps:[Pt,Mt]}],Jt=function(){function t(t,e){this.callbackPresetPlayer=t,this.mimicsPresetPlayer=e}return t.prototype.play=function(t,e){if(t instanceof ht)return t.value;if(t instanceof dt)return this.callbackPresetPlayer.play(t.callback,e);if(t instanceof ft)return this.mimicsPresetPlayer.play(t.origin,e);if(t instanceof lt)throw t.exception},t}(),Bt=function(){function t(){}return t.prototype.play=function(t,e){return t.apply(void 0,[e])},t}(),Gt=function(){function t(t){this.apply=t}return t.prototype.play=function(t,e){if(e instanceof h)return t[e.name];if(e instanceof l)return t[e.name]=e.value,!0;if(e instanceof p){var r=t[e.name];return this.apply(r,t,e.args)}return e instanceof f?this.apply(t,void 0,e.args):e instanceof d?e.name in t:void 0},t}(),zt=function(){function t(t,e){this.presets=t,this.matcher=e}return t.prototype.get=function(t){var e,r;try{for(var n=i(this.presets.get()),o=n.next();!o.done;o=n.next()){var s=o.value,a=s.target,u=s.playable.isPlayable;if(this.matcher.matched(t,a)&&!0===u())return s}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t}(),Wt=new N("Reflect Apply"),Yt=[{provide:Wt,useValue:Reflect.apply,deps:[]},{provide:Jt,useClass:Jt,deps:[Bt,Gt]},{provide:zt,useClass:zt,deps:[Pt,Mt]},{provide:Gt,useClass:Gt,deps:[Wt]},{provide:St,useClass:St,deps:[zt,qt,Jt]},{provide:Bt,useClass:Bt,deps:[]}],Qt=function(){function t(t){this.expressionFormatter=t}return t.prototype.format=function(t,e,r,n){return""+this.expressionFormatter.format(t)+(void 0!==n?" of "+n:"")+" "+e.toLowerCase()+", but was called "+r+" time(s)"},t}(),Xt=function(){function t(t){this.expressionFormatter=t}return t.prototype.format=function(t){var e,r,n="";try{for(var o=i(t),s=o.next();!s.done;s=o.next()){var a=s.value;n+=this.expressionFormatter.format(a)+"\n"}}catch(t){e={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return n.substr(0,n.length-1)},t}(),Zt=function(){function t(t,e,r,n,o,i){this.getPropertyFormatter=t,this.setPropertyFormatter=e,this.methodFormatter=r,this.namedMethodFormatter=n,this.constantFormatter=o,this.inOperatorFormatter=i}return t.prototype.format=function(t){return t instanceof h?this.getPropertyFormatter.format(t):t instanceof l?this.setPropertyFormatter.format(t):t instanceof d?this.inOperatorFormatter.format(t):t instanceof f?this.methodFormatter.format(t):t instanceof p?this.namedMethodFormatter.format(t):t instanceof r?this.constantFormatter.format(t):void 0},t}(),$t=function(){function t(t,e){this.constantFormatter=t,this.propertyKeyFormatter=e}return t.prototype.format=function(t){return"Assignment of "+this.constantFormatter.format(t.value)+" to property '"+this.propertyKeyFormatter.format(t.name)+"'"},t}(),te=function(){function t(){}return t.prototype.format=function(e){var n,o;if(e instanceof r)return"It.Is("+e.predicate+")";if(e instanceof String||"string"==typeof e)return"'"+e+"'";if(e instanceof Array){var s=[];try{for(var a=i(Object.keys(e)),u=a.next();!u.done;u=a.next()){var c=u.value;s.push((new t).format(e[c]))}}catch(t){n={error:t}}finally{try{u&&!u.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}return"["+s+"]"}return""+e},t}(),ee=function(){function t(){}return t.prototype.format=function(t){return String(t)},t}(),re=function(){function t(t,e){this.constantFormatter=t,this.propertyKeyFormatter=e}return t.prototype.format=function(t){var e=this,r=[];t.args.forEach((function(t){r.push(e.constantFormatter.format(t))}));var n=r.join(", ");return this.propertyKeyFormatter.format(t.name)+"("+n+")"},t}(),ne=function(){function t(t){this.constantFormatter=t}return t.prototype.format=function(t){return"("+this.constantFormatter.format(t.args)+")"},t}(),oe=function(){function t(t){this.propertyKeyFormatter=t}return t.prototype.format=function(t){return"In operator for '"+this.propertyKeyFormatter.format(t.name)+"'"},t}(),ie=function(){function t(t){this.propertyKeyFormatter=t}return t.prototype.format=function(t){return"Getter of '"+this.propertyKeyFormatter.format(t.name)+"'"},t}(),se=[{provide:Ot,useClass:Ot,deps:[Qt,Xt]},{provide:Xt,useClass:Xt,deps:[Zt]},{provide:$t,useClass:$t,deps:[te,ee]},{provide:ee,useClass:ee,deps:[]},{provide:re,useClass:re,deps:[te,ee]},{provide:ne,useClass:ne,deps:[te]},{provide:oe,useClass:oe,deps:[ee]},{provide:ie,useClass:ie,deps:[ee]},{provide:Zt,useClass:Zt,deps:[ie,$t,ne,re,te,oe]},{provide:Qt,useClass:Qt,deps:[Zt]},{provide:te,useClass:te,deps:[]}],ae=function(){function t(t){this.constantMatcher=t}return t.prototype.matched=function(t,e){if(e instanceof r)return e.test(t);var n=e;return!(t.name!==n.name||!this.constantMatcher.matched(t.value,n.value))},t}(),ue=function(){function t(){}return t.prototype.matched=function(t,e){return e instanceof r?e.test(t):t===e},t}(),ce=function(){function t(t){this.argumentsMatcher=t}return t.prototype.matched=function(t,e){if(e instanceof r)return e.test(t);var n=e;return t.name===n.name&&this.argumentsMatcher.matched(t.args,n.args)},t}(),pe=function(){function t(t){this.constantMatcher=t}return t.prototype.matched=function(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++){var n=t[r],o=e[r];if(!1===this.constantMatcher.matched(n,o))return!1}return!0},t}(),fe=function(){function t(t){this.argumentsMatcher=t}return t.prototype.matched=function(t,e){if(e instanceof r)return e.test(t);var n=e;return this.argumentsMatcher.matched(t.args,n.args)},t}(),he=function(){function t(){}return t.prototype.matched=function(t,e){if(e instanceof r)return e.test(t);var n=e;return t.name===n.name},t}(),le=function(){function t(){}return t.prototype.matched=function(t,e){if(e instanceof r)return e.test(t);var n=e;return t.name===n.name},t}(),de=[{provide:Mt,useClass:Mt,deps:[le,ae,fe,ce,he]},{provide:ae,useClass:ae,deps:[ue]},{provide:ce,useClass:ce,deps:[pe]},{provide:fe,useClass:fe,deps:[pe]},{provide:he,useClass:he,deps:[]},{provide:le,useClass:le,deps:[]},{provide:ue,useClass:ue,deps:[]},{provide:pe,useClass:pe,deps:[ue]}],ye=function(){function t(){}return t.prototype.has=function(t,e){return e instanceof y&&e.name===t},t}(),ve=function(){function t(t,e,r){this.storage=t,this.propertyDescriptorProvider=e,this.has=r}return t.prototype.hasMethod=function(t){var e=this.storage.get();return!(!e||!this.has(e,t))&&this.propertyDescriptorProvider.get(e,t).value instanceof Function},t}(),me=function(){function t(t,e){this.expressionHasMethodExplorer=t,this.objectHasMethodExplorer=e}return t.prototype.has=function(t,e){return!!(e instanceof ft&&this.objectHasMethodExplorer.has(t,e.origin))||this.expressionHasMethodExplorer.has(t,e.target)},t}(),ge=function(){function t(){}return t.prototype.has=function(t,e){return e[t]instanceof Function},t}(),xe=function(){function t(){}return t.prototype.has=function(t,e){return!(e instanceof r||e instanceof v||e instanceof y||e instanceof x)&&e.name===t},t}(),be=function(){function t(t,e,r){this.storage=t,this.propertyDescriptorProvider=e,this.has=r}return t.prototype.hasProperty=function(t){var e=this.storage.get();if(e&&this.has(e,t)){var r=this.propertyDescriptorProvider.get(e,t);return void 0!==r.get||r.value instanceof Function==!1}return!1},t}(),we=function(){function t(t,e){this.expressionHasPropertyExplorer=t,this.objectHasPropertyExplorer=e}return t.prototype.has=function(t,e){return!!(e instanceof ft&&this.objectHasPropertyExplorer.has(t,e.origin))||this.expressionHasPropertyExplorer.has(t,e.target)},t}(),Pe=function(){function t(){}return t.prototype.has=function(t,e){return Reflect.has(e,t)&&e[t]instanceof Function==!1},t}(),Ce=function(){function t(){}return t.prototype.has=function(t,e){return!1!==(0,e.playable.isPlayable)()&&(e.target instanceof x?e.target.name===t:e.target instanceof r&&e.target.test(new d(t)))},t}(),Ee=function(){function t(){}return t.prototype.get=function(t,e){for(var r=t;null!==r;){var n=Reflect.getOwnPropertyDescriptor(r,e);if(void 0!==n)return n;r=Reflect.getPrototypeOf(r)}},t}(),Oe=new N("Reflect has"),Me=Reflect.has,je=[{provide:ye,useClass:ye,deps:[]},{provide:Tt,useClass:Tt,deps:[Pt,ve,me]},{provide:ge,useClass:ge,deps:[]},{provide:me,useClass:me,deps:[ye,ge]},{provide:xe,useClass:xe,deps:[]},{provide:kt,useClass:kt,deps:[Pt,be,we]},{provide:Pe,useClass:Pe,deps:[]},{provide:we,useClass:we,deps:[xe,Pe]},{provide:Dt,useClass:Dt,deps:[Pt,Ce]},{provide:Ce,useClass:Ce,deps:[]},{provide:ve,useClass:ve,deps:[M,Ee,Oe]},{provide:Vt,useClass:Vt,deps:[M,Ee,Oe]},{provide:be,useClass:be,deps:[M,Ee,Oe]},{provide:Ee,useClass:Ee,deps:[]},{provide:Oe,useValue:Me,deps:[]}],Fe=function(){function t(){}return t.prototype.build=function(t){return Object.assign({target:function(){}},t)},t}();var Se=function(){function t(){}return t.prototype.get=function(t,e){return a(e,function(t){return[{provide:Fe,useClass:Fe,deps:[]},{provide:st,useFactory:function(e){return e.build(t)},deps:[Fe]}]}(t),ct,pt,Ct,jt,Ut,Kt,Yt,se,de,je)},t}(),Ie=function(){function t(e){void 0===e&&(e={}),this.options=e;var r=ot(Object.assign(Object.assign({},t.options),e),{provide:it,useValue:this,deps:[]});this.options=r.get(st),this.tracker=r.get(C),this.expressionReflector=r.get(b),this.interceptor=r.get(w),this.setupFactory=r.get(at),this.verifier=r.get(O),this.prototypeStorage=r.get(M)}return Object.defineProperty(t,"options",{get:function(){return void 0===t.Options&&(t.Options={target:function(){},injectorConfig:new Se}),t.Options},set:function(e){t.Options=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.options.name},enumerable:!1,configurable:!0}),t.prototype.setup=function(t){var e=this.expressionReflector.reflect(t);return this.setupFactory(e)},t.prototype.verify=function(t,e){e=void 0===e?P.Once():e;var r=this.tracker.get().map((function(t){return t.expression}));return this.verifier.test(t,e,r,this.name),this},t.prototype.object=function(){return this.interceptor.object()},t.prototype.prototypeof=function(t){return this.prototypeStorage.set(t),this},t.prototype.insequence=function(t,e){return t.add(this,e),this},t}();Ie.Options=void 0;var _e=function(){function t(t,e,r,n,o){this.typesMatcher=t,this.commonTypeProvider=e,this.primitiveMatcher=r,this.objectMatcher=n,this.functionMatcher=o}return t.prototype.matched=function(t,e){if(!1===this.typesMatcher.matched(t,e))return!1;switch(this.commonTypeProvider.ofType(t,e)){case"undefined":return this.primitiveMatcher.matched(t,e);case"object":return this.objectMatcher.matched(t,e);case"boolean":case"number":case"string":return this.primitiveMatcher.matched(t,e);case"function":return this.functionMatcher.matched(t,e);case"symbol":case"bigint":return this.primitiveMatcher.matched(t,e)}},t}(),ke=function(){function t(t){this.equalMatcher=t}return t.prototype.matched=function(t,e){return e instanceof r?e.test(t):this.equalMatcher.matched(t,e)},t}(),Te=function(){function t(){}return t.prototype.ofType=function(t,e){return typeof t&&typeof e},t}(),Ne=function(){function t(){}return t.prototype.matched=function(t,e){return typeof t==typeof e},t}(),Ae=function(){function t(){}return t.prototype.matched=function(t,e){return t===e},t}(),Re=function(){function t(t){this.matchers=t}return t.prototype.matched=function(t,e){var r,n;if(null===t&&null===e)return!0;if(t===e)return!0;try{for(var o=i(this.matchers),s=o.next();!s.done;s=o.next()){var a=s.value.matched(t,e);if(void 0!==a)return a}}catch(t){r={error:t}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return!1},t}(),De=function(){function t(){}return t.prototype.matched=function(t,e){return t===e},t}(),qe=function(){function t(){}return t.prototype.verify=function(t,e){return"function"==typeof t[Symbol.iterator]&&"function"==typeof e[Symbol.iterator]},t}(),He=function(){function t(t,e){this.injector=t,this.iterableTester=e}return t.prototype.matched=function(t,e){if(!0===this.iterableTester.verify(t,e)){var r=a(t[Symbol.iterator]()),n=a(e[Symbol.iterator]());if(r.length!==n.length)return!1;for(var o=this.injector.get(ue),i=0;i<r.length;i++){var s=r[i],u=n[i];if(!1===o.matched(s,u))return!1}return!0}},t}(),Le=new N("OBJECT_MATCHERS"),Ve=function(){function t(t,e){this.mapMatcher=t,this.objectMapProvider=e}return t.prototype.matched=function(t,e){var r=this.objectMapProvider.get(t),n=this.objectMapProvider.get(e);return this.mapMatcher.matched(r,n)},t}(),Ue=function(){function t(){}return t.prototype.get=function(t){var e,r,n=this.getProps(t,[]),o=a(new Set(n)),s=new Map;try{for(var u=i(o),c=u.next();!c.done;c=u.next()){var p=c.value;s.set(p,t[p])}}catch(t){e={error:t}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(e)throw e.error}}return s},t.prototype.getProps=function(t,e){return null===t||t===Object.prototype?e:(e=a(e,Object.getOwnPropertyNames(t),Object.getOwnPropertySymbols(t)),this.getProps(Object.getPrototypeOf(t),e))},t}(),Ke=function(){function t(t){this.injector=t}return t.prototype.matched=function(t,e){var r,n;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;var o=this.injector.get(ue);try{for(var a=i(t),u=a.next();!u.done;u=a.next()){var c=s(u.value,2),p=c[0],f=c[1];if(!1===e.has(p))return!1;if(!1===o.matched(f,e.get(p)))return!1}}catch(t){r={error:t}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return!0}},t}(),Je=[{provide:Te,useClass:Te,deps:[]},{provide:ke,useClass:ke,deps:[_e]},{provide:ue,useExisting:ke},{provide:_e,useClass:_e,deps:[Ne,Te,Ae,Re,De]},{provide:De,useClass:De,deps:[]},{provide:qe,useClass:qe,deps:[]},{provide:He,useClass:He,deps:[z,qe]},{provide:Re,useClass:Re,deps:[Le]},{provide:Ve,useClass:Ve,deps:[Ke,Ue]},{provide:Ae,useClass:Ae,deps:[]},{provide:Ue,useClass:Ue,deps:[]},{provide:Ne,useClass:Ne,deps:[]},{provide:Ke,useClass:Ke,deps:[z]}],Be=function(){function t(){}return t.prototype.matched=function(t,e){if(t instanceof Date&&e instanceof Date)return t.valueOf()===e.valueOf()},t}(),Ge=function(t){function e(e){void 0===e&&(e=[]);var r=t.call(this)||this;return r.matchers=e,r}return o(e,t),e.prototype.get=function(e,r){return a(t.prototype.get.call(this,e,r),Je,this.matchers,[{provide:Le,useClass:Be,multi:!0,deps:[]},{provide:Le,useExisting:Ke,multi:!0,deps:[]},{provide:Le,useExisting:He,multi:!0,deps:[]},{provide:Le,useExisting:Ve,multi:!0,deps:[]}])},e}(Se);t.DefaultInjectorConfig=Se,t.EqualMatchingInjectorConfig=Ge,t.ExpectedGetPropertyExpression=m,t.ExpectedInOperatorExpression=x,t.ExpectedMethodExpression=v,t.ExpectedNamedMethodExpression=y,t.ExpectedSetPropertyExpression=g,t.GetPropertyInteraction=h,t.Host=B,t.INJECTOR=A,t.InOperatorInteraction=d,t.InjectionToken=N,t.Injector=z,t.Interaction=c,t.It=r,t.MOCK=it,t.MOCK_OPTIONS=st,t.MethodInteraction=f,t.Mock=Ie,t.MoqAPI=e,t.NamedMethodInteraction=p,t.NullInjector=L,t.OBJECT_MATCHERS=Le,t.Optional=U,t.PlayTimes=bt,t.PlayableAlways=gt,t.PlayableExactly=yt,t.PlayableNever=vt,t.PlayableOnce=mt,t.PlayableSequence=xt,t.Self=K,t.SetPropertyInteraction=l,t.SkipSelf=J,t.Times=P,t.dump=function(t,e){void 0===e&&(e=console);var r=ot(t.options,{provide:it,useValue:t,deps:[]}).get(Xt),n=t.tracker.get().map((function(t){return t.expression})),o=r.format(n),i="-------------------------------";e.log("Dump of "+(void 0===t.name?"noname mock":t.name)),e.log(i),e.log("\n"+o),e.log(i)},t.forwardRef=I,t.getClosureSafeProperty=F,t.injectorFactory=ot,t.isForwardRef=k,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=moq.ts.umd.min.js.map