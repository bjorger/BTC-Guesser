!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define("moq.ts/internal",["exports"],e):e(((t="undefined"!=typeof globalThis?globalThis:t||self).moq=t.moq||{},t.moq.ts=t.moq.ts||{},t.moq.ts.internal={}))}(this,(function(t){"use strict";var e=function(){function t(){}return t.prototype.ofType=function(t,e){return typeof t&&typeof e},t}(),r=function(){function t(){}return t.prototype.matched=function(t,e){if(t instanceof Date&&e instanceof Date)return t.valueOf()===e.valueOf()},t}(),n=function(){function t(t){this.predicate=t}return t.Is=function(e){return new t(e)},t.IsAny=function(){return new t((function(){return!0}))},t.prototype.test=function(t){try{var e=this.predicate(t);return!0===e||void 0===e}catch(t){return!1}},t}(),o=function(){function t(t){this.equalMatcher=t}return t.prototype.matched=function(t,e){return e instanceof n?e.test(t):this.equalMatcher.matched(t,e)},t}(),i=function(){function t(t,e,r,n,o){this.typesMatcher=t,this.commonTypeProvider=e,this.primitiveMatcher=r,this.objectMatcher=n,this.functionMatcher=o}return t.prototype.matched=function(t,e){if(!1===this.typesMatcher.matched(t,e))return!1;switch(this.commonTypeProvider.ofType(t,e)){case"undefined":return this.primitiveMatcher.matched(t,e);case"object":return this.objectMatcher.matched(t,e);case"boolean":case"number":case"string":return this.primitiveMatcher.matched(t,e);case"function":return this.functionMatcher.matched(t,e);case"symbol":case"bigint":return this.primitiveMatcher.matched(t,e)}},t}(),s=function(){function t(){}return t.prototype.matched=function(t,e){return typeof t==typeof e},t}(),a=function(){function t(){}return t.prototype.matched=function(t,e){return t===e},t}(),u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};function p(t,e){function r(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}Object.create;function c(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function f(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s}function h(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(f(arguments[e]));return t}Object.create;var l=function(){function t(t){this.matchers=t}return t.prototype.matched=function(t,e){var r,n;if(null===t&&null===e)return!0;if(t===e)return!0;try{for(var o=c(this.matchers),i=o.next();!i.done;i=o.next()){var s=i.value.matched(t,e);if(void 0!==s)return s}}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return!1},t}(),d=function(){function t(){}return t.prototype.matched=function(t,e){return t===e},t}(),y=function(){function t(){}return t.prototype.verify=function(t,e){return"function"==typeof t[Symbol.iterator]&&"function"==typeof e[Symbol.iterator]},t}(),v=function(){function t(){}return t.prototype.matched=function(t,e){return e instanceof n?e.test(t):t===e},t}(),m=function(){function t(t,e){this.injector=t,this.iterableTester=e}return t.prototype.matched=function(t,e){if(!0===this.iterableTester.verify(t,e)){var r=h(t[Symbol.iterator]()),n=h(e[Symbol.iterator]());if(r.length!==n.length)return!1;for(var o=this.injector.get(v),i=0;i<r.length;i++){var s=r[i],a=n[i];if(!1===o.matched(s,a))return!1}return!0}},t}(),g=function(){function t(t){this.desc=t}return t.prototype.toString=function(){return"InjectionToken "+this.desc},t}(),P=new g("OBJECT_MATCHERS"),x=function(){function t(t,e){this.mapMatcher=t,this.objectMapProvider=e}return t.prototype.matched=function(t,e){var r=this.objectMapProvider.get(t),n=this.objectMapProvider.get(e);return this.mapMatcher.matched(r,n)},t}(),b=function(){function t(){}return t.prototype.get=function(t){var e,r,n=this.getProps(t,[]),o=h(new Set(n)),i=new Map;try{for(var s=c(o),a=s.next();!a.done;a=s.next()){var u=a.value;i.set(u,t[u])}}catch(t){e={error:t}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return i},t.prototype.getProps=function(t,e){return null===t||t===Object.prototype?e:(e=h(e,Object.getOwnPropertyNames(t),Object.getOwnPropertySymbols(t)),this.getProps(Object.getPrototypeOf(t),e))},t}(),E=function(){function t(t){this.injector=t}return t.prototype.matched=function(t,e){var r,n;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;var o=this.injector.get(v);try{for(var i=c(t),s=i.next();!s.done;s=i.next()){var a=f(s.value,2),u=a[0],p=a[1];if(!1===e.has(u))return!1;if(!1===o.matched(p,e.get(u)))return!1}}catch(t){r={error:t}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return!0}},t}();
/**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
function M(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(M).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;var e=t.toString();if(null==e)return""+e;var r=e.indexOf("\n");return-1===r?e:e.substring(0,r)}
/**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */function w(t){for(var e in t)if(t[e]===w)return e;throw Error("Could not find renamed property on target object.")}var C=w({__forward_ref__:w});function F(t){return t.__forward_ref__=F,t.toString=function(){return M(this())},t}function O(t){return"function"==typeof(e=t)&&e.hasOwnProperty(C)&&e.__forward_ref__===F?t():t;var e}var T,S=new g("INJECTOR"),k={},_=/\n/gm,j="__source",I=w({provide:String,useValue:w}),A=function(){function t(){}return t.prototype.get=function(t,e){if(void 0===e&&(e=k),e===k){var r=new Error("NullInjectorError: No provider for "+M(t)+"!");throw r.name="NullInjectorError",r}return e},t}();function N(t,e,r,n){void 0===n&&(n=null),t=t&&"\n"===t.charAt(0)&&"Éµ"===t.charAt(1)?t.substr(2):t;var o=M(e);if(Array.isArray(e))o=e.map(M).join(" -> ");else if("object"==typeof e){var i=[];for(var s in e)if(e.hasOwnProperty(s)){var a=e[s];i.push(s+":"+("string"==typeof a?JSON.stringify(a):M(a)))}o="{"+i.join(", ")+"}"}return r+(n?"("+n+")":"")+"["+o+"]: "+t.replace(_,"\n  ")}
/**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */!function(t){t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional"}(T||(T={}));
/**
     * @license
     * Copyright Google Inc. All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var R=function(){},H=function(){},D=function(){},q=function(t,e,r){return new B(t,e,r)},V=function(){function t(){}return t.create=function(t,e){return Array.isArray(t)?q(t,e,""):q(t.providers,t.parent,t.name||"")},t}();V.THROW_IF_NOT_FOUND=k,V.NULL=new A,V.__NG_ELEMENT_ID__=-1;var L=function(t){return t},U=[],K=L,G=function(){return Array.prototype.slice.call(arguments)},B=function(){function t(t,e,r){void 0===e&&(e=new A),void 0===r&&(r=null),this.parent=e,this.source=r;var n=this._records=new Map;n.set(V,{token:V,fn:L,deps:U,value:this,useNew:!1}),n.set(S,{token:S,fn:L,deps:U,value:this,useNew:!1}),this.scope=z(n,t)}return t.prototype.get=function(t,e,r){void 0===r&&(r=T.Default);var n=this._records,o=n.get(t);void 0===o&&n.set(t,null);try{return W(t,o,n,this.parent,e,r)}catch(e){return function(t,e,r,n){var o=t.ngTempTokenPath;throw e[j]&&o.unshift(e[j]),t.message=N("\n"+t.message,o,r,n),t.ngTokenPath=o,t.ngTempTokenPath=null,t}(e,t,"StaticInjectorError",this.source)}},t.prototype.toString=function(){var t=[];return this._records.forEach((function(e,r){return t.push(M(r))})),"StaticInjector["+t.join(", ")+"]"},t}();function J(t){var e=function(t){var e=U,r=t.deps;if(r&&r.length){e=[];for(var n=0;n<r.length;n++){var o=6,i=O(r[n]);if(Array.isArray(i))for(var s=0,a=i;s<a.length;s++){var u=a[s];u instanceof R||u===R?o|=1:u instanceof D||u===D?o&=-3:u instanceof H||u===H?o&=-5:i=O(u)}e.push({token:i,options:o})}}else if(t.useExisting){e=[{token:i=O(t.useExisting),options:6}]}else if(!r&&!(I in t))throw Q("'deps' required",t);return e}(t),r=L,n=U,o=!1,i=O(t.provide);if(I in t)n=t.useValue;else if(t.useFactory)r=t.useFactory;else if(t.useExisting);else if(t.useClass)o=!0,r=O(t.useClass);else{if("function"!=typeof i)throw Q("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",t);o=!0,r=i}return{deps:e,fn:r,useNew:o,value:n}}function Y(t){return Q("Cannot mix multi providers and regular providers",t)}function z(t,e){var r=null;if(e)if(e=O(e),Array.isArray(e))for(var n=0;n<e.length;n++)r=z(t,e[n])||r;else{if("function"==typeof e)throw Q("Function/Class not supported",e);if(!e||"object"!=typeof e||!e.provide)throw Q("Unexpected provider",e);var o=O(e.provide),i=J(e);if(!0===e.multi){var s=t.get(o);if(s){if(s.fn!==G)throw Y(o)}else t.set(o,s={token:e.provide,deps:[],useNew:!1,fn:G,value:U});o=e,s.deps.push({token:o,options:6})}var a=t.get(o);if(a&&a.fn===G)throw Y(o);t.set(o,i)}return r}function W(t,e,r,n,o,i){try{return function(t,e,r,n,o,i){var s;if(!e||i&T.SkipSelf)s=i&T.Self?i&T.Optional?V.NULL.get(t,void 0!==o?o:null):V.NULL.get(t,o):n.get(t,o,T.Default);else{if((s=e.value)===K)throw Error("ÉµCircular dependency");if(s===U){e.value=K;var a=e.useNew,u=e.fn,p=e.deps,c=U;if(p.length){c=[];for(var f=0;f<p.length;f++){var l=p[f],d=l.options,y=2&d?r.get(l.token):void 0;c.push(W(l.token,y,r,y||4&d?n:V.NULL,1&d?null:V.THROW_IF_NOT_FOUND,T.Default))}}e.value=s=a?new(u.bind.apply(u,h([void 0],c))):u.apply(void 0,c)}}return s}(t,e,r,n,o,i)}catch(r){throw r instanceof Error||(r=new Error(r)),(r.ngTempTokenPath=r.ngTempTokenPath||[]).unshift(t),e&&e.value===K&&(e.value=U),r}}function Q(t,e){return new Error(N(t,e,"StaticInjectorError"))}var X=[{provide:e,useClass:e,deps:[]},{provide:o,useClass:o,deps:[i]},{provide:v,useExisting:o},{provide:i,useClass:i,deps:[s,e,a,l,d]},{provide:d,useClass:d,deps:[]},{provide:y,useClass:y,deps:[]},{provide:m,useClass:m,deps:[V,y]},{provide:l,useClass:l,deps:[P]},{provide:x,useClass:x,deps:[E,b]},{provide:a,useClass:a,deps:[]},{provide:b,useClass:b,deps:[]},{provide:s,useClass:s,deps:[]},{provide:E,useClass:E,deps:[V]}],Z=function(t,e){this.name=t,this.args=e},$=function(t){function e(e,r){return t.call(this,e,r)||this}return p(e,t),e}(Z),tt=function(t){function e(e){return t.call(this,void 0,e)||this}return p(e,t),e}(Z),et=function(t){function e(e){return t.call(this,e,void 0)||this}return p(e,t),e}(Z),rt=function(t){function e(e,r){var n=t.call(this,e,[r])||this;return n.value=r,n}return p(e,t),e}(Z),nt=function(t){function e(e){return t.call(this,e,void 0)||this}return p(e,t),e}(Z),ot=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e}($),it=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e}(tt),st=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e}(et),at=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e}(rt),ut=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e}(nt),pt=function(){function t(){}return t.prototype.reflect=function(t){this.reflectedInfo=void 0;var e=t(this.expressionProxy());return e instanceof n&&this.reflectedInfo instanceof at==!1?e:this.reflectedInfo},t.prototype.expressionProxy=function(){var t=this;return new Proxy((function(){}),{get:function(e,r){return t.reflectedInfo=new st(r),function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.reflectedInfo=new ot(r,e)}},set:function(e,r,n){return t.reflectedInfo=new at(r,n),!0},apply:function(e,r,n){t.reflectedInfo=new it(n)},has:function(e,r){return t.reflectedInfo=new ut(r),!0}})},t}(),ct=[{provide:pt,useClass:pt,deps:[]}],ft=new g("Reflect has"),ht=function(){function t(){}return t.prototype.has=function(t,e){return e instanceof ot&&e.name===t},t}(),lt=function(){function t(t,e,r){this.presets=t,this.membersExplorer=e,this.explorer=r}return t.prototype.has=function(t){var e=this;return!!this.membersExplorer.hasMethod(t)||void 0!==this.presets.get().find((function(r){return e.explorer.has(t,r)}))},t}(),dt=function(){function t(){this.presets=[]}return t.prototype.add=function(t){this.presets.unshift(t)},t.prototype.get=function(){return h(this.presets)},t}(),yt=function(){function t(t,e,r){this.storage=t,this.propertyDescriptorProvider=e,this.has=r}return t.prototype.hasMethod=function(t){var e=this.storage.get();return!(!e||!this.has(e,t))&&this.propertyDescriptorProvider.get(e,t).value instanceof Function},t}(),vt=function(t,e,r){this.playable=t,this.target=e,this.origin=r},mt=function(){function t(t,e){this.expressionHasMethodExplorer=t,this.objectHasMethodExplorer=e}return t.prototype.has=function(t,e){return!!(e instanceof vt&&this.objectHasMethodExplorer.has(t,e.origin))||this.expressionHasMethodExplorer.has(t,e.target)},t}(),gt=function(){function t(){}return t.prototype.has=function(t,e){return e[t]instanceof Function},t}(),Pt=function(){function t(){}return t.prototype.has=function(t,e){return!(e instanceof n||e instanceof it||e instanceof ot||e instanceof ut)&&e.name===t},t}(),xt=function(){function t(t,e,r){this.presets=t,this.membersExplorer=e,this.explorer=r}return t.prototype.has=function(t){var e=this;return!!this.membersExplorer.hasProperty(t)||void 0!==this.presets.get().find((function(r){return e.explorer.has(t,r)}))},t}(),bt=function(){function t(t,e,r){this.storage=t,this.propertyDescriptorProvider=e,this.has=r}return t.prototype.hasProperty=function(t){var e=this.storage.get();if(e&&this.has(e,t)){var r=this.propertyDescriptorProvider.get(e,t);return void 0!==r.get||r.value instanceof Function==!1}return!1},t}(),Et=function(){function t(t,e){this.expressionHasPropertyExplorer=t,this.objectHasPropertyExplorer=e}return t.prototype.has=function(t,e){return!!(e instanceof vt&&this.objectHasPropertyExplorer.has(t,e.origin))||this.expressionHasPropertyExplorer.has(t,e.target)},t}(),Mt=function(){function t(){}return t.prototype.has=function(t,e){return Reflect.has(e,t)&&e[t]instanceof Function==!1},t}(),wt=function(){function t(t,e){this.presets=t,this.explorer=e}return t.prototype.has=function(t){var e=this;return void 0!==this.presets.get().find((function(r){return e.explorer.has(t,r)}))},t}(),Ct=function(){function t(){}return t.prototype.has=function(t,e){return!1!==(0,e.playable.isPlayable)()&&(e.target instanceof ut?e.target.name===t:e.target instanceof n&&e.target.test(new nt(t)))},t}(),Ft=function(){function t(t){var e;this.prototype=null,this.prototype=null!==(e=null==t?void 0:t.prototype)&&void 0!==e?e:t}return t.prototype.get=function(){return this.prototype},t.prototype.set=function(t){this.prototype=t},t}(),Ot=function(){function t(){}return t.prototype.get=function(t,e){for(var r=t;null!==r;){var n=Reflect.getOwnPropertyDescriptor(r,e);if(void 0!==n)return n;r=Reflect.getPrototypeOf(r)}},t}(),Tt=function(){function t(t,e,r){this.storage=t,this.propertyDescriptorProvider=e,this.has=r}return t.prototype.isReadOnly=function(t){var e=this.storage.get();if(e&&this.has(e,t)){var r=this.propertyDescriptorProvider.get(e,t);return r.get instanceof Function&&void 0===r.set||!1===r.writable}return!1},t}(),St=Reflect.has,kt=[{provide:ht,useClass:ht,deps:[]},{provide:lt,useClass:lt,deps:[dt,yt,mt]},{provide:gt,useClass:gt,deps:[]},{provide:mt,useClass:mt,deps:[ht,gt]},{provide:Pt,useClass:Pt,deps:[]},{provide:xt,useClass:xt,deps:[dt,bt,Et]},{provide:Mt,useClass:Mt,deps:[]},{provide:Et,useClass:Et,deps:[Pt,Mt]},{provide:wt,useClass:wt,deps:[dt,Ct]},{provide:Ct,useClass:Ct,deps:[]},{provide:yt,useClass:yt,deps:[Ft,Ot,ft]},{provide:Tt,useClass:Tt,deps:[Ft,Ot,ft]},{provide:bt,useClass:bt,deps:[Ft,Ot,ft]},{provide:Ot,useClass:Ot,deps:[]},{provide:ft,useValue:St,deps:[]}],_t=function(){function t(t){this.constantMatcher=t}return t.prototype.matched=function(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++){var n=t[r],o=e[r];if(!1===this.constantMatcher.matched(n,o))return!1}return!0},t}(),jt=function(){function t(t){this.constantMatcher=t}return t.prototype.matched=function(t,e){if(e instanceof n)return e.test(t);var r=e;return!(t.name!==r.name||!this.constantMatcher.matched(t.value,r.value))},t}(),It=function(){function t(t){this.argumentsMatcher=t}return t.prototype.matched=function(t,e){if(e instanceof n)return e.test(t);var r=e;return t.name===r.name&&this.argumentsMatcher.matched(t.args,r.args)},t}(),At=function(){function t(t){this.argumentsMatcher=t}return t.prototype.matched=function(t,e){if(e instanceof n)return e.test(t);var r=e;return this.argumentsMatcher.matched(t.args,r.args)},t}(),Nt=function(){function t(){}return t.prototype.matched=function(t,e){if(e instanceof n)return e.test(t);var r=e;return t.name===r.name},t}(),Rt=function(){function t(){}return t.prototype.matched=function(t,e){if(e instanceof n)return e.test(t);var r=e;return t.name===r.name},t}(),Ht=function(){function t(t,e,r,n,o){this.getPropertyExpressionMatcher=t,this.setPropertyExpressionMatcher=e,this.methodExpressionMatcher=r,this.namedMethodExpressionMatcher=n,this.inOperatorExpressionMatcher=o}return t.prototype.matched=function(t,e){return t===e||(void 0===e||(t instanceof et&&(e instanceof st||e instanceof n)?this.getPropertyExpressionMatcher.matched(t,e):t instanceof rt&&(e instanceof at||e instanceof n)?this.setPropertyExpressionMatcher.matched(t,e):t instanceof nt&&(e instanceof ut||e instanceof n)?this.inOperatorExpressionMatcher.matched(t,e):t instanceof tt&&(e instanceof it||e instanceof n)?this.methodExpressionMatcher.matched(t,e):t instanceof $&&(e instanceof ot||e instanceof n)&&this.namedMethodExpressionMatcher.matched(t,e)))},t}(),Dt=[{provide:Ht,useClass:Ht,deps:[Rt,jt,At,It,Nt]},{provide:jt,useClass:jt,deps:[v]},{provide:It,useClass:It,deps:[_t]},{provide:At,useClass:At,deps:[_t]},{provide:Nt,useClass:Nt,deps:[]},{provide:Rt,useClass:Rt,deps:[]},{provide:v,useClass:v,deps:[]},{provide:_t,useClass:_t,deps:[v]}],qt=function(){function t(){}return t.prototype.format=function(e){var r,o;if(e instanceof n)return"It.Is("+e.predicate+")";if(e instanceof String||"string"==typeof e)return"'"+e+"'";if(e instanceof Array){var i=[];try{for(var s=c(Object.keys(e)),a=s.next();!a.done;a=s.next()){var u=a.value;i.push((new t).format(e[u]))}}catch(t){r={error:t}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}return"["+i+"]"}return""+e},t}(),Vt=function(){function t(t){this.expressionFormatter=t}return t.prototype.format=function(t,e,r,n){return""+this.expressionFormatter.format(t)+(void 0!==n?" of "+n:"")+" "+e.toLowerCase()+", but was called "+r+" time(s)"},t}(),Lt=function(){function t(t,e,r,n,o,i){this.getPropertyFormatter=t,this.setPropertyFormatter=e,this.methodFormatter=r,this.namedMethodFormatter=n,this.constantFormatter=o,this.inOperatorFormatter=i}return t.prototype.format=function(t){return t instanceof et?this.getPropertyFormatter.format(t):t instanceof rt?this.setPropertyFormatter.format(t):t instanceof nt?this.inOperatorFormatter.format(t):t instanceof tt?this.methodFormatter.format(t):t instanceof $?this.namedMethodFormatter.format(t):t instanceof n?this.constantFormatter.format(t):void 0},t}(),Ut=function(){function t(t,e){this.expectedExpressionFormatter=t,this.trackedExpressionsFormatter=e}return t.prototype.format=function(t,e,r,n,o){var i="-------------------------------------";return this.expectedExpressionFormatter.format(t,e,r,o)+"\n"+i+"\nTracked calls:\n"+this.trackedExpressionsFormatter.format(n)+"\n"+i+"\n"},t}(),Kt=function(){function t(t){this.expressionFormatter=t}return t.prototype.format=function(t){var e,r,n="";try{for(var o=c(t),i=o.next();!i.done;i=o.next()){var s=i.value;n+=this.expressionFormatter.format(s)+"\n"}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return n.substr(0,n.length-1)},t}(),Gt=function(){function t(t,e){this.constantFormatter=t,this.propertyKeyFormatter=e}return t.prototype.format=function(t){return"Assignment of "+this.constantFormatter.format(t.value)+" to property '"+this.propertyKeyFormatter.format(t.name)+"'"},t}(),Bt=function(){function t(){}return t.prototype.format=function(t){return String(t)},t}(),Jt=function(){function t(t,e){this.constantFormatter=t,this.propertyKeyFormatter=e}return t.prototype.format=function(t){var e=this,r=[];t.args.forEach((function(t){r.push(e.constantFormatter.format(t))}));var n=r.join(", ");return this.propertyKeyFormatter.format(t.name)+"("+n+")"},t}(),Yt=function(){function t(t){this.constantFormatter=t}return t.prototype.format=function(t){return"("+this.constantFormatter.format(t.args)+")"},t}(),zt=function(){function t(t){this.propertyKeyFormatter=t}return t.prototype.format=function(t){return"In operator for '"+this.propertyKeyFormatter.format(t.name)+"'"},t}(),Wt=function(){function t(t){this.propertyKeyFormatter=t}return t.prototype.format=function(t){return"Getter of '"+this.propertyKeyFormatter.format(t.name)+"'"},t}(),Qt=[{provide:Ut,useClass:Ut,deps:[Vt,Kt]},{provide:Kt,useClass:Kt,deps:[Lt]},{provide:Gt,useClass:Gt,deps:[qt,Bt]},{provide:Bt,useClass:Bt,deps:[]},{provide:Jt,useClass:Jt,deps:[qt,Bt]},{provide:Yt,useClass:Yt,deps:[qt]},{provide:zt,useClass:zt,deps:[Bt]},{provide:Wt,useClass:Wt,deps:[Bt]},{provide:Lt,useClass:Lt,deps:[Wt,Gt,Yt,Jt,qt,zt]},{provide:Vt,useClass:Vt,deps:[Lt]},{provide:qt,useClass:qt,deps:[]}],Xt=function(){function t(){}return t.prototype.play=function(t,e){return t.apply(void 0,[e])},t}(),Zt=function(t,e,r){this.playable=t,this.target=e,this.value=r},$t=function(t,e,r){this.playable=t,this.target=e,this.callback=r},te=function(t,e,r){this.playable=t,this.target=e,this.exception=r},ee=function(){function t(t,e){this.callbackPresetPlayer=t,this.mimicsPresetPlayer=e}return t.prototype.play=function(t,e){if(t instanceof Zt)return t.value;if(t instanceof $t)return this.callbackPresetPlayer.play(t.callback,e);if(t instanceof vt)return this.mimicsPresetPlayer.play(t.origin,e);if(t instanceof te)throw t.exception},t}(),re=function(){function t(t){this.apply=t}return t.prototype.play=function(t,e){if(e instanceof et)return t[e.name];if(e instanceof rt)return t[e.name]=e.value,!0;if(e instanceof $){var r=t[e.name];return this.apply(r,t,e.args)}return e instanceof tt?this.apply(t,void 0,e.args):e instanceof nt?e.name in t:void 0},t}(),ne=function(){function t(t,e){this.presets=t,this.matcher=e}return t.prototype.get=function(t){var e,r;try{for(var n=c(this.presets.get()),o=n.next();!o.done;o=n.next()){var i=o.value,s=i.target,a=i.playable.isPlayable;if(this.matcher.matched(t,s)&&!0===a())return i}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t}(),oe=function(){function t(t,e,r){this.playablePresetProvider=t,this.presetPlayablesUpdater=e,this.presetPlayer=r}return t.prototype.play=function(t){var e=this.playablePresetProvider.get(t);if(this.presetPlayablesUpdater.update(t,e),void 0!==e)return this.presetPlayer.play(e,t)},t}(),ie=function(){function t(t,e){this.presets=t,this.matcher=e}return t.prototype.update=function(t,e){var r,n;try{for(var o=c(this.presets.get()),i=o.next();!i.done;i=o.next()){var s=i.value,a=s.target,u=s.playable.update;if(this.matcher.matched(t,a))u(s===e?0:1)}}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}},t}(),se=new g("Reflect Apply"),ae=[{provide:se,useValue:Reflect.apply,deps:[]},{provide:ee,useClass:ee,deps:[Xt,re]},{provide:ne,useClass:ne,deps:[dt,Ht]},{provide:re,useClass:re,deps:[se]},{provide:oe,useClass:oe,deps:[ne,ie,ee]},{provide:Xt,useClass:Xt,deps:[]}],ue=function(){function t(t,e){this.tracker=t,this.interactionPlayer=e}return t.prototype.intercept=function(t,e,r){var n=new tt(r);return this.tracker.add(n),this.interactionPlayer.play(n)},t}(),pe=function(){function t(t){this.prototypeStorage=t}return t.prototype.intercept=function(){return this.prototypeStorage.get()},t}(),ce=Symbol("MoqAPI"),fe=function(){function t(t,e,r,n,o,i,s){this.mock=t,this.tracker=e,this.propertiesValueStorage=r,this.interactionPlayer=n,this.hasPropertyExplorer=o,this.hasMethodExplorer=i,this.spyFunctionProvider=s}return t.prototype.intercept=function(t){var e=new et(t);return this.tracker.add(e),t===ce?this.mock:this.propertiesValueStorage.has(t)?this.propertiesValueStorage.get(t):this.hasPropertyExplorer.has(t)?this.interactionPlayer.play(e):this.hasMethodExplorer.has(t)?this.spyFunctionProvider.get(t):this.interactionPlayer.play(e)},t}(),he=function(){function t(t,e,r,n,o,i,s){this.tracker=t,this.propertiesValueStorage=e,this.interactionPlayer=r,this.inOperatorInteractionExplorer=n,this.hasPropertyExplorer=o,this.hasMethodExplorer=i,this.presetPlayablesUpdater=s}return t.prototype.intercept=function(t){var e=new nt(t);return this.tracker.add(e),!!this.propertiesValueStorage.has(t)||(this.inOperatorInteractionExplorer.has(t)?this.interactionPlayer.play(e):(this.presetPlayablesUpdater.update(e,void 0),!!this.hasPropertyExplorer.has(t)||!!this.hasMethodExplorer.has(t)))},t}(),le=function(){function t(t){this.sequenceId=t,this.log=[]}return t.prototype.add=function(t){var e={id:this.sequenceId.next(),expression:t};this.log.push(e)},t.prototype.get=function(){return h(this.log)},t}(),de=function(){function t(){this.storage=new Map}return t.prototype.has=function(t){return this.storage.has(t)},t.prototype.get=function(t){return this.storage.get(t)},t.prototype.set=function(t,e){this.storage.set(t,e)},t}(),ye=function(){function t(t,e){this.tracker=t,this.interactionPlayer=e,this.map=new Map}return t.prototype.get=function(t){var e=this;return!1===this.map.has(t)&&this.map.set(t,(function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var o=new $(t,r);return e.tracker.add(o),e.interactionPlayer.play(o)})),this.map.get(t)},t}(),ve=function(){function t(t,e,r,n){this.tracker=t,this.propertiesValueStorage=e,this.interactionPlayer=r,this.propertyIsReadOnlyTester=n}return t.prototype.intercept=function(t,e,r){var n=new rt(e,r);if(this.tracker.add(n),e===ce)return!1;if(!0===this.propertyIsReadOnlyTester.isReadOnly(e))return!1;var o=this.interactionPlayer.play(n);return!0!==o&&void 0!==o||this.propertiesValueStorage.set(e,r),void 0===o||o},t}(),me=function(){function t(t){this.prototypeStorage=t}return t.prototype.intercept=function(t){return void 0!==t&&(this.prototypeStorage.set(t),!0)},t}(),ge=function(){function t(t,e,r,n,o,i,s){this.options=t,this.getTrap=e,this.setTrap=r,this.hasTrap=n,this.applyTrap=o,this.getPrototypeOfTrap=i,this.setPrototypeOfTrap=s}return t.prototype.object=function(){return void 0===this._proxy&&(this._proxy=this.createObject()),this._proxy},t.prototype.createObject=function(){var t=this,e={get:function(e,r){return t.getTrap.intercept(r)},set:function(e,r,n){return t.setTrap.intercept(e,r,n)},has:function(e,r){return t.hasTrap.intercept(r)},apply:function(e,r,n){return t.applyTrap.intercept(e,r,n)},getPrototypeOf:function(){return t.getPrototypeOfTrap.intercept()},setPrototypeOf:function(e,r){return t.setPrototypeOfTrap.intercept(r)}};return this.options.name&&(e.mockName=this.options.name),new Proxy(this.options.target,e)},t}(),Pe=new g("IMock"),xe=new g("mock options"),be=[{provide:ge,useClass:ge,deps:[xe,fe,ve,he,ue,pe,me]},{provide:ue,useClass:ue,deps:[le,oe]},{provide:fe,useClass:fe,deps:[Pe,le,de,oe,xt,lt,ye]},{provide:pe,useClass:pe,deps:[Ft]},{provide:he,useClass:he,deps:[le,de,oe,wt,xt,lt,ie]},{provide:de,useClass:de,deps:[]},{provide:Ft,useFactory:function(t){var e=t.target;return new Ft(e)},deps:[xe]},{provide:ve,useClass:ve,deps:[le,de,oe,Tt]},{provide:me,useClass:me,deps:[Ft]},{provide:ye,useClass:ye,deps:[le,oe]}],Ee=function(){function t(){}return t.prototype.build=function(t){return Object.assign({target:function(){}},t)},t}();var Me=[{provide:ie,useClass:ie,deps:[dt,Ht]}],we=new g("PRESET_BUILDER_FACTORY"),Ce=function(t){var e=this;this.count=t,this.invoked=0,this.update=function(t){0===t&&e.invoked++},this.isPlayable=function(){return e.invoked<=e.count}},Fe=function(){this.update=function(){},this.isPlayable=function(){return!1}},Oe=function(){var t=this;this.played=!1,this.update=function(e){0===e&&(t.played=!0)},this.isPlayable=function(){return!1===t.played}},Te=function(){this.isPlayable=function(){return!0},this.update=function(){}},Se=function(t){var e=this;this.sequence=t,this.index=0,this.update=function(){e.index++},this.isPlayable=function(){return!(e.index>=e.sequence.length)&&e.sequence[e.index]}},ke=function(){function t(){}return t.Exactly=function(t){return new Ce(t)},t.Always=function(){return t.always},t.Never=function(){return t.never},t.Once=function(){return new Oe},t.Sequence=function(t){return new Se(t)},t}();ke.always=new Te,ke.never=new Fe;var _e=function(){function t(t,e,r,n){void 0===n&&(n=ke.Always()),this.mock=t,this.set=e,this.target=r,this.playable=n}return t.prototype.mimics=function(t){var e=new vt(this.playable,this.target,t);return this.set(e),this.mock},t.prototype.returns=function(t){var e=new Zt(this.playable,this.target,t);return this.set(e),this.mock},t.prototype.throws=function(t){var e=new te(this.playable,this.target,t);return this.set(e),this.mock},t.prototype.callback=function(t){var e=new $t(this.playable,this.target,t);return this.set(e),this.mock},t.prototype.play=function(t){return this.playable=t,this},t}(),je=[{provide:dt,useClass:dt,deps:[]},{provide:we,useFactory:function(t,e){return function(r){return new _e(t,(function(t){return e.add(t)}),r)}},deps:[Pe,dt]}],Ie=Function,Ae=function(){function t(){this.value=0}return t.prototype.next=function(){return this.value++},t}(),Ne=[{provide:Ae,useClass:Ae,deps:[]},{provide:le,useClass:le,deps:[Ae]}],Re=function(){function t(t){this.expressionMatcher=t}return t.prototype.count=function(t,e){var r,n,o=0;try{for(var i=c(e),s=i.next();!s.done;s=i.next()){var a=s.value;!0===this.expressionMatcher.matched(a,t)&&(o+=1)}}catch(t){r={error:t}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return o},t}(),He=function(t){function e(e){return t.call(this,e)||this}return p(e,t),e}(Error),De=function(){function t(t,e,r){this.reflector=t,this.callCounter=e,this.verifyFormatter=r}return t.prototype.test=function(t,e,r,n){var o=this.reflector.reflect(t),i=this.callCounter.count(o,r);if(!1===e.test(i)){var s=this.verifyFormatter.format(o,e.message,i,r,n);throw new He(s)}},t}(),qe=[{provide:De,useClass:De,deps:[pt,Re,Ut]},{provide:Re,useClass:Re,deps:[Ht]}];t.ApplyTrap=ue,t.ArgumentsMatcher=_t,t.CallCounter=Re,t.CallbackPresetPlayer=Xt,t.CallbacksPreset=$t,t.CommonTypeProvider=e,t.ConstantFormatter=qt,t.ConstantMatcher=v,t.DateMatcher=r,t.EqualConstantMatcher=o,t.EqualMatcher=i,t.ExpectedExpressionFormatter=Vt,t.ExpectedExpressionReflector=pt,t.ExpressionFormatter=Lt,t.ExpressionHasMethodExplorer=ht,t.ExpressionHasPropertyExplorer=Pt,t.ExpressionMatcher=Ht,t.FunctionMatcher=d,t.GetPropertyExpressionFormatter=Wt,t.GetPropertyExpressionMatcher=Rt,t.GetPrototypeOfTrap=pe,t.GetTrap=fe,t.HasMethodExplorer=lt,t.HasPropertyExplorer=xt,t.HasTrap=he,t.InOperatorFormatter=zt,t.InOperatorInteractionExplorer=wt,t.InOperatorMatcher=Nt,t.InteractionPlayer=oe,t.IterableTester=y,t.IteratorMatcher=m,t.MapMatcher=E,t.MembersMethodExplorer=yt,t.MembersPropertyExplorer=bt,t.MethodExpressionFormatter=Yt,t.MethodExpressionMatcher=At,t.MimicsPreset=vt,t.MimicsPresetPlayer=re,t.MockOptionsBuilder=Ee,t.NamedMethodExpressionFormatter=Jt,t.NamedMethodExpressionMatcher=It,t.ObjectHasMethodExplorer=gt,t.ObjectHasPropertyExplorer=Mt,t.ObjectMapProvider=b,t.ObjectMatcher=l,t.POJOMatcher=x,t.PRESET_BUILDER_FACTORY=we,t.PlayablePresetProvider=ne,t.PresetBuilder=_e,t.PresetHasInOperatorExplorer=Ct,t.PresetHasMethodExplorer=mt,t.PresetHasPropertyExplorer=Et,t.PresetPlayablesUpdater=ie,t.PresetPlayer=ee,t.Presets=dt,t.PrimitiveMatcher=a,t.PropertiesValueStorage=de,t.PropertyDescriptorProvider=Ot,t.PropertyIsReadOnlyTester=Tt,t.PropertyKeyFormatter=Bt,t.PrototypeStorage=Ft,t.ProxyFactory=ge,t.REFLECT_APPLY=se,t.REFLECT_HAS=ft,t.ReturnsPreset=Zt,t.SequenceId=Ae,t.SetPropertyExpressionFormatter=Gt,t.SetPropertyExpressionMatcher=jt,t.SetPrototypeOfTrap=me,t.SetTrap=ve,t.SpyFunctionProvider=ye,t.ThrowsPreset=te,t.TrackedExpressionsFormatter=Kt,t.Tracker=le,t.Type=Ie,t.TypesMatcher=s,t.Verifier=De,t.VerifyError=He,t.VerifyFormatter=Ut,t.equalMatchersProviders=X,t.expressionMatchersProviders=Dt,t.formattersProviders=Qt,t.interactionPlayersProviders=ae,t.interceptorsProviders=be,t.mockOptionsProviders=function(t){return[{provide:Ee,useClass:Ee,deps:[]},{provide:xe,useFactory:function(e){return e.build(t)},deps:[Ee]}]},t.playablesProviders=Me,t.presetsProviders=je,t.reflectorProviders=ct,t.stringify=M,t.trackerProviders=Ne,t.typeExplorersProviders=kt,t.verificationProviders=qe,t.Éµ0=St,t.Éµa=V,t.Éµb=A,t.Éµc=P,t.Éµd=g,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=moq.ts-internal.umd.min.js.map